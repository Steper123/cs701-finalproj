{"ast":null,"code":"var _jsxFileName = \"/Users/steper123/Desktop/CS_701/Term_Project/actualAPP/client/src/components/AddDeletePerson.js\";\n//styling and react components\nimport React, { useState, useEffect } from \"react\";\nimport { Button, Row, Col } from \"reactstrap\"; //components that will be called\n\nimport PlayerHolder from \"./PlayerHolder\";\nimport FanHolder from \"./FanHolder\";\nimport PlayerAdder from \"./PlayerAdder\";\nimport FanAdder from \"./FanAdder\";\n\nconst AddDeletePerson = ({\n  team,\n  type,\n  back,\n  returnHome\n}) => {\n  const [list, setList] = React.useState([]);\n  /*checks if the call was asking for players, scorers, or fans, returning the list of those individuals*/\n\n  useEffect(() => {\n    const buildList = () => {\n      if (type === \"Players\") {\n        fetch(\"/api/players\").then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n\n          throw new Error(response.statusText);\n        }).then(fetchedPlayers => {\n          const actualList = fetchedPlayers.filter(player => player.teamId === team.id);\n          setList(actualList);\n        }).catch(err => console.error(err)); // eslint-disable-line no-console\n      } else if (type === \"Scorers\") {\n        const allAccess = fetch(`/api/teamaccess`).then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n\n          throw new Error(response.statusText);\n        }).then(info => {\n          const returnedInfo = info.filter(access => access.teamId === team.id && access.type === 2);\n          return returnedInfo;\n        }).catch(error => {\n          console.log(error);\n        });\n        allAccess.then(data => {\n          fetch(`/api/users`).then(response => {\n            if (!response.ok) {\n              throw new Error(response.status_text);\n            }\n\n            return response.json();\n          }).then(data => {\n            console.log(allAccess);\n            console.log(allAccess[0]);\n            const trueList = data.filter(user => allAccess.includes(user.id));\n            setList(trueList);\n          }).catch(error => {\n            console.log(error);\n          });\n        });\n      } else if (type === \"Fans\") {\n        const allAccess = fetch(`/api/teamaccess`).then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n\n          throw new Error(response.statusText);\n        }).then(info => {\n          const returnedInfo = info.filter(access => access.teamId === team.id);\n          const myIds = returnedInfo.map(point => point.userId);\n          return myIds;\n        }).catch(error => {\n          console.log(error);\n        });\n        allAccess.then(data => {\n          fetch(`/api/users`).then(response => {\n            if (!response.ok) {\n              throw new Error(response.status_text);\n            }\n\n            return response.json();\n          }).then(returnedVal => {\n            console.log(returnedVal);\n            console.log(data);\n            const trueList = returnedVal.filter(user => data.includes(user.id));\n            setList(trueList);\n          }).catch(error => {\n            console.log(error);\n          });\n        });\n      }\n    };\n\n    buildList();\n  }, []);\n  const backgroundLogo = /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: require(`../assets/images/${team.name.toLowerCase()}_player.png`),\n    alt: \"MyLogo\",\n    class: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }));\n\n  const handleDeletePlayer = player => {\n    //handles the callback used when getting rid of a player\n    fetch(`/api/players/${player.id}`, {\n      method: \"DELETE\"\n    }).then(response => {\n      if (response.ok) {\n        const newList = list.filter(playerExist => playerExist.id !== player.id);\n        setList(newList);\n      }\n    }).catch(err => console.error(err));\n  };\n\n  const handleDeleteAccess = fan => {\n    //handles the callback of when a fan is deleted from a list\n    console.log(fan);\n    const thisAccess = fetch(`/api/teamaccess/`).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(response.statusText);\n    }).then(info => {\n      const returnedInfo = info.filter(access => access.teamId === team.id && access.userId === fan.id);\n      console.log(returnedInfo);\n      return returnedInfo[0];\n    }).catch(error => {\n      console.log(error);\n    });\n    thisAccess.then(access => {\n      console.log(access);\n      fetch(`/api/teamaccess/${access.id}`, {\n        method: \"DELETE\"\n      }).then(response => {\n        if (response.ok) {\n          const newList = list.filter(personExist => personExist.id !== fan.id);\n          setList(newList);\n        }\n      }).catch(err => console.error(err));\n    });\n  };\n\n  const handleAddPlayer = player => {\n    //handles the callback of trying to add a person to the team roster\n    fetch(\"/api/players\", {\n      method: \"POST\",\n      body: JSON.stringify(player),\n      headers: new Headers({\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      })\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(response.statusText);\n    }) //Add the newly created order to local orders and update order state\n    .then(receivedPerson => {\n      console.log(\"NEW LIST CREATION\");\n      const newList = [...list, receivedPerson];\n      console.log(newList);\n      setList(newList);\n      back();\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  const handleAddUser = (accessSelected, actualUser) => {\n    //handles the callback of including a user in the database with a new teamaccess\n    fetch(\"/api/teamaccess\", {\n      method: \"POST\",\n      body: JSON.stringify(accessSelected),\n      headers: new Headers({\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      })\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(response.statusText);\n    }).then(receivedAccess => {\n      console.log(\"ACCESS\");\n      const newList = [...list, actualUser];\n      console.error(newList);\n      console.log(newList);\n      setList(newList);\n      back();\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  const backButton = /*#__PURE__*/React.createElement(Button, {\n    onClick: () => back(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }, \"Back\");\n  console.log(list);\n\n  if (list != null && type === \"Players\") {\n    const trueMapping = list.map(person => /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(PlayerHolder, {\n      player: person,\n      teamLoc: team.location,\n      teamName: team.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => handleDeletePlayer(person),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }\n    }, \"Delete Player\")));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 15\n      }\n    }, \" \", trueMapping, \" \")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PlayerAdder, {\n      teamId: team.id,\n      addFunc: handleAddPlayer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }, backButton), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }\n    }, backgroundLogo));\n  } else if (list != null) {\n    const trueMapping = list.map(person => /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FanHolder, {\n      person: person,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => handleDeleteAccess(person),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }\n    }, \"Delete\")));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 15\n      }\n    }, \" \", trueMapping, \" \"), /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 15\n      }\n    }, trueMapping.length)), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FanAdder, {\n      teamId: team.id,\n      addFunc: handleAddUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }\n    }, backButton), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }\n    }, backgroundLogo));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 15\n      }\n    }, \"Loading...\");\n  }\n};\n\nexport default AddDeletePerson;","map":{"version":3,"sources":["/Users/steper123/Desktop/CS_701/Term_Project/actualAPP/client/src/components/AddDeletePerson.js"],"names":["React","useState","useEffect","Button","Row","Col","PlayerHolder","FanHolder","PlayerAdder","FanAdder","AddDeletePerson","team","type","back","returnHome","list","setList","buildList","fetch","then","response","ok","json","Error","statusText","fetchedPlayers","actualList","filter","player","teamId","id","catch","err","console","error","allAccess","info","returnedInfo","access","log","data","status_text","trueList","user","includes","myIds","map","point","userId","returnedVal","backgroundLogo","require","name","toLowerCase","handleDeletePlayer","method","newList","playerExist","handleDeleteAccess","fan","thisAccess","personExist","handleAddPlayer","body","JSON","stringify","headers","Headers","Accept","receivedPerson","handleAddUser","accessSelected","actualUser","receivedAccess","backButton","trueMapping","person","location","length"],"mappings":"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","sourcesContent":["//styling and react components\nimport React, { useState, useEffect } from \"react\";\nimport { Button, Row, Col } from \"reactstrap\";\n\n//components that will be called\nimport PlayerHolder from \"./PlayerHolder\";\nimport FanHolder from \"./FanHolder\";\nimport PlayerAdder from \"./PlayerAdder\";\nimport FanAdder from \"./FanAdder\";\n\nconst AddDeletePerson = ({ team, type, back, returnHome }) => {\n  const [list, setList] = React.useState([]);\n\n  /*checks if the call was asking for players, scorers, or fans, returning the list of those individuals*/\n  useEffect(() => {\n    const buildList = () => {\n      if (type === \"Players\") {\n        fetch(\"/api/players\")\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n            throw new Error(response.statusText);\n          })\n          .then((fetchedPlayers) => {\n            const actualList = fetchedPlayers.filter(player => player.teamId === team.id);\n            setList(actualList);\n          }).catch((err) => console.error(err)); // eslint-disable-line no-console\n      }\n      else if (type === \"Scorers\") {\n        const allAccess = fetch(`/api/teamaccess`)\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n            throw new Error(response.statusText);\n          }).then((info) => {\n              const returnedInfo = info.filter(access => access.teamId === team.id && access.type === 2);\n              return returnedInfo;\n\n            }\n          ).catch(error => {\n            console.log(error);\n          });\n\n          allAccess.then(data => {\n            fetch(`/api/users`)\n              .then(response => {\n                if (!response.ok) {\n                  throw new Error(response.status_text);\n                }\n                return response.json();\n              })\n              .then(data => {\n                console.log(allAccess);\n                console.log(allAccess[0]);\n                const trueList = data.filter(user => allAccess.includes(user.id));\n                setList(trueList);\n              })\n              .catch(error => {\n                console.log(error);\n              });\n\n\n          })\n      }\n\n      else if (type === \"Fans\") {\n        const allAccess = fetch(`/api/teamaccess`)\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n            throw new Error(response.statusText);\n          }).then((info) => {\n              const returnedInfo = info.filter(access => access.teamId === team.id);\n              const myIds = returnedInfo.map(point => point.userId);\n              return myIds;\n            }\n          ).catch(error => {\n            console.log(error);\n          });\n\n          allAccess.then(data => {\n            fetch(`/api/users`)\n              .then(response => {\n                if (!response.ok) {\n                  throw new Error(response.status_text);\n                }\n                return response.json();\n              })\n              .then(returnedVal => {\n                console.log(returnedVal);\n                console.log(data);\n                const trueList = returnedVal.filter(user => data.includes(user.id));\n                setList(trueList);\n              })\n              .catch(error => {\n                console.log(error);\n              });\n\n\n          })\n      }\n    }\n    buildList();\n    }, []);\n\n    const backgroundLogo = (\n      <div>\n        <img src={require(`../assets/images/${team.name.toLowerCase()}_player.png`)} alt=\"MyLogo\" class=\"center\" />\n      </div>\n    );\n\n    const handleDeletePlayer = (player) => {\n      //handles the callback used when getting rid of a player\n      fetch(`/api/players/${player.id}`, {\n        method: \"DELETE\"\n      })\n        .then(response => {\n          if (response.ok) {\n            const newList = list.filter(playerExist => playerExist.id !== player.id);\n            setList(newList);\n          }\n        })\n        .catch(err => console.error(err));\n    };\n\n    const handleDeleteAccess = (fan) => {\n      //handles the callback of when a fan is deleted from a list\n      console.log(fan);\n      const thisAccess = fetch(`/api/teamaccess/`)\n        .then((response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          throw new Error(response.statusText);\n        }).then((info) => {\n            const returnedInfo = info.filter(access => access.teamId === team.id && access.userId === fan.id);\n            console.log(returnedInfo);\n            return returnedInfo[0];\n          }\n        ).catch(error => {\n          console.log(error);\n        });\n\n      thisAccess.then((access) => {\n        console.log(access);\n        fetch(`/api/teamaccess/${access.id}`, {\n          method: \"DELETE\"\n        })\n          .then(response => {\n            if (response.ok) {\n              const newList = list.filter(personExist => personExist.id !== fan.id);\n              setList(newList);\n            }\n          })\n          .catch(err => console.error(err));\n      })\n    };\n\n    const handleAddPlayer = (player) => {\n      //handles the callback of trying to add a person to the team roster\n        fetch(\"/api/players\", {\n          method: \"POST\",\n          body: JSON.stringify(player),\n          headers: new Headers({\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\"\n          })\n        })\n          .then(response => {\n            if (response.ok) {\n              return response.json();\n            }\n            throw new Error(response.statusText);\n          })\n          //Add the newly created order to local orders and update order state\n          .then(receivedPerson => {\n            console.log(\"NEW LIST CREATION\");\n            const newList = [...list, receivedPerson];\n            console.log(newList);\n            setList(newList);\n            back();\n          })\n          .catch(err => {\n            console.error(err);\n          });\n    }\n\n    const handleAddUser = (accessSelected, actualUser) => {\n      //handles the callback of including a user in the database with a new teamaccess\n      fetch(\"/api/teamaccess\", {\n        method: \"POST\",\n        body: JSON.stringify(accessSelected),\n        headers: new Headers({\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        })\n      })\n        .then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n          throw new Error(response.statusText);\n        })\n        .then(receivedAccess => {\n          console.log(\"ACCESS\");\n          const newList = [...list, actualUser];\n          console.error(newList);\n          console.log(newList);\n          setList(newList);\n          back();\n        })\n        .catch(err => {\n          console.error(err);\n        });\n    }\n\n    const backButton = (\n      <Button onClick={() => back()}>Back</Button>\n    );\n\n    console.log(list);\n\n    if (list != null && type === \"Players\") {\n      const trueMapping = list.map(person => (\n        <Row>\n          <PlayerHolder player={person} teamLoc={team.location} teamName={team.name}></PlayerHolder>\n          <button onClick={() => handleDeletePlayer(person)}>Delete Player</button>\n        </Row>\n      )\n    );\n      return (\n        <div>\n          <Row>\n            <Col>\n              <div> {trueMapping} </div>\n            </Col>\n            <Col>\n              <PlayerAdder teamId={team.id} addFunc={handleAddPlayer}></PlayerAdder>\n            </Col>\n          </Row>\n          <Row>\n            {backButton}\n          </Row>\n          <Row>\n            {backgroundLogo}\n          </Row>\n        </div>\n      );\n\n    }\n    else if (list != null) {\n      const trueMapping = list.map(person => (\n        <Row>\n          <FanHolder person={person}></FanHolder>\n          <Button onClick={() => handleDeleteAccess(person)}>Delete</Button>\n        </Row>\n      ));\n      return (\n        <div>\n          <Row>\n            <Col>\n              <ul> {trueMapping} </ul>\n              <strong>{trueMapping.length}</strong>\n            </Col>\n            <Col>\n              <FanAdder teamId={team.id} addFunc={handleAddUser}></FanAdder>\n            </Col>\n          </Row>\n          <Row>\n            {backButton}\n          </Row>\n          <Row>\n            {backgroundLogo}\n          </Row>\n        </div>\n      );\n    }\n    else {\n      return (<div>Loading...</div>);\n    }\n\n}\n\nexport default AddDeletePerson;\n"]},"metadata":{},"sourceType":"module"}